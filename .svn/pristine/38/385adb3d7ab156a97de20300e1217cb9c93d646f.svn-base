// 工具函数抽取

// 手机号判断
const phoneCheck=function(phone,success=()=>{},error=()=>{}){
	let myreg = /^(0|86|17951)?(13[0-9]|15[012356789]|166|17[3678]|18[0-9]|14[57])[0-9]{8}$/;
	if(myreg.test(phone)){
		success();
	}else{
		error();
	}
}
// 生成8位随机数
const generate8=function(){
	let i=Math.random()*100000000;
	i=i.toFixed(0);
	return i;
}
// 时间抽取
const timeProcess=function(arr){
	for (let i=1;i<arr.length;i++) {
		let diff=arr[i].time-arr[i-1].time;
		let tp='';
		let ifShow=true;
		if(diff <= 60000){
			tp=Math.floor(diff/1000)+'秒前';
			ifShow=false;
		}else if(diff > 60000 && diff <= 86400000){
			diff=diff/1000;
			if(diff<3600){
				tp=Math.floor(diff/60)+"分钟前";
			}else{
				tp=Math.floor(diff/3600)+'小时前';
			}
		}else{
			tp=new Date(arr[i].time).toLocaleDateString().replace(/\//g,'-');
		}
		arr[i].showTime=tp;
		arr[i].ifShow=ifShow;
	}
	arr[0].showTime=new Date(arr[0].time).toTimeString().substr(0,8);
	arr[0].ifShow=true;
	return arr;
}


export default{
	phoneCheck,
	generate8,
	timeProcess,
}