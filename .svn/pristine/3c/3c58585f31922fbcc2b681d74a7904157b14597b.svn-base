<!-- 修改昵称页 -->
<template>
	<view>
		<view class="">
			<input class="width-750 height-100 bg-fff pd-lt30" v-model="name" type="text" value="" maxlength="30"/>
		</view>
	</view>
</template>

<script>
	// 存储用户信息
	import {mapMutations} from 'vuex';
	export default {
		data() {
			return {
				name:'',
			}
		},
		onLoad(e) {
			// 接收上个页面传过来的昵称
			this.name = e.name;
		},
		// 监听下一步按钮的点击事件
		onNavigationBarButtonTap(e){
			this.submitName();
		},
		methods: {
			// 存储用户信息的方法
			...mapMutations(['setInfo']),
			// 提交成功的提示
			submitName(){
				let temp = {
					name : this.name
				};
				this.setInfo(temp);
 				// 跳转回编辑资料的页面
				uni.navigateBack();
				uni.showToast({
					title:"修改成功！"
				})
			}
		},
		computed:{
			canSubmit:function(){
				return this.name.length > 0 ? false : true;
			}
		}
	}
</script>

<style>
	page{
		background-color: #EDF0F2;
	}
	
	/* 提交按钮 */
	.submitBtn{
		width: 150upx;
		margin-left: 540upx;
		margin-top: 40upx;
	}
</style>
