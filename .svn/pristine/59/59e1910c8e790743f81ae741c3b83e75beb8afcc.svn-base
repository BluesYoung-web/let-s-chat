<script>
	// 管理账号信息缓存
	import service from 'service.js';
	import {mapState,mapMutations} from 'vuex';
	export default {
		methods:{
			...mapMutations(['login','setInfo','addFriendFromCache'])
		},
		computed:{
			...mapState(['userInfo','myFriends'])
		},
		onLaunch: function() {
			console.log('App Launch');
			//在加载函数中监听缓存，管理登陆状态，如果缓存中有用户登录信息，就不必要每次打开应用都需要登录
			let userInfo = service.getUsers();
			userInfo=userInfo[0];
			console.log("读取缓存："+JSON.stringify(userInfo));
			// 将用户信息写入state
			this.setInfo(userInfo);
			// 登录
			this.login(userInfo.name);
			// 从缓存中读取好友列表
			this.addFriendFromCache(service.getFriends());
			console.log("缓存读取"+JSON.stringify(service.getFriends()));
		},
		onShow: function() {
			console.log('App Show');
		},
		onHide: function() {
			console.log('App Hide');
		}
	}
</script>

<style>
	/*每个页面公共css */
	@import url("common/common.css");
	
</style>
